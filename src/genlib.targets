;; -*- mode:scheme; coding:utf-8 -*-
;; configuration file for generating precompiled files
;; (core base)
((target scmlib)
 (library . (core base))
 (file . "../boot/lib/scmlib.scm")
 (construct)
 (imports (core) (sagittarius)))
;; (core syntax-case)
((target macro)
 (library . (core syntax-case))
 (file . "../boot/lib/macro.scm")
 (construct)
 (imports (core) (core base) (core errors) (sagittarius)
	  (for (smatch) expand) (sagittarius vm))
 (additionals "../boot/lib/smatch.scm"))
;; compiler-aux
((target compile-aux)
 (library . (sagittarius compiler util))
 (file . "../boot/compiler-aux.scm")
 (construct)
 (imports (core) (core errors) (sagittarius)
	  ;;(for (core syntax-case) expand) ???
	  (for (smatch) expand) (sagittarius vm))
 (additionals "../boot/lib/smatch.scm"))
;; compiler
((target compiler)
 (library . (sagittarius compiler))
 (file . "../boot/compiler.scm")
 (construct)
 (imports (core) (core base) (core errors) (sagittarius)
	  (core syntax-case)
	  (for (except (rnrs) syntax-rules) expand)
	  (for (smatch) expand) 
	  (for (core misc) expand) 
	  (for (compat r7rs) expand) 
	  (sagittarius vm) (sagittarius vm instruction)
	  (sagittarius compiler util)
	  (sagittarius vm debug)
	  (for (compiler-aux) expand)
	  (sagittarius compiler procedure))
 (exports compile compile-p1 compile-p2 compile-p3 compile-p4 compile-p5)
 (includes "../boot")
 (additionals "../boot/lib/smatch.scm"
	      "../boot/compiler-aux.scm"))
;; else
((target errors) (file . "../boot/lib/errors.scm"))
((target arith) (file . "../boot/lib/arith.scm"))
